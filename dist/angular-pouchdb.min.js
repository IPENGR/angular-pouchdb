!function(t,e){"use strict";e.module("pouchdb",[]).constant("POUCHDB_METHODS",{destroy:"qify",put:"qify",post:"qify",get:"qify",remove:"qify",bulkDocs:"qify",allDocs:"qify",putAttachment:"qify",getAttachment:"qify",removeAttachment:"qify",query:"qify",viewCleanup:"qify",info:"qify",compact:"qify",revsDiff:"qify",changes:"eventEmitter",sync:"eventEmitter",replicate:{to:"eventEmitter",from:"eventEmitter"}}).service("pouchDecorators",["$q",function(t){this.qify=function(e){return function(){return t.when(e.apply(this,arguments))}},this.eventEmitter=function(e){return function(){var n=t.defer(),r=e.apply(this,arguments).on("change",function(t){return n.notify({change:t})}).on("uptodate",function(t){return n.notify({uptodate:t})}).on("complete",function(t){return n.resolve(t)}).on("error",function(t){return n.reject(t)});return r.$promise=n.promise,r}}}]).provider("pouchDB",["POUCHDB_METHODS",function(t){this.methods=t,this.$get=["$window","pouchDecorators",function(t,n){function r(t,i,o){for(var u in i){var f=i[u];if(!e.isString(f))return r(t,f,u);f=n[f],o?t[o][u]=f(t[o][u]):t[u]=f(t[u])}return t}var i=this.methods;return function(e,n){var o=new t.PouchDB(e,n);return r(o,i)}}]}])}(window,window.angular);